\chapter{Parsing Grammar}

\section{FIRST Set}

  \begin{definition}
    \textbf{FIRST Set}: the set of terminal symbols that we are going to see
    first
  \end{definition}

  \subsection{Finding FIRST}

    For each symbol $ X $

    \begin{enumerate}
      \item If $ X $ is a terminal, then $ \FIRST\left( X \right) = { X } $
      \item If there is a production $ X \to \epsilon $, then add $ \epsilon $
      to $ \FIRST\left( X \right) $
      \item If there is a production $ X \to Y_{1} ... Y_{n} $, then add
      $ \FIRST\left( Y_{1} ... Y_{n} \right) $ to $ \FIRST\left( X \right) $
      \begin{enumerate}
        \item If $ \FIRST\left( Y_{1} \right) $ does not contain $ \epsilon $,
        then:
        \begin{equation}
          \FIRST\left( Y_{1} ... Y_{n} \right) = \FIRST\left( Y_{1} \right)
        \end{equation}

        \item Otherwise
        \begin{equation}
          \FIRST\left( Y_{1} ... Y_{n} \right) =
            \frac{\FIRST\left( Y_{1} \right)}{\epsilon} \cup
            \FIRST\left( Y_{2} ... Y_{n} \right)
        \end{equation}

        \item If all of $ Y_{1} ... Y_{n} $ have $ \epsilon $, then add
        $ \epsilon $ to $ \FIRST\left( X \right) $
      \end{enumerate}
    \end{enumerate}

\section{FOLLOW Set}

  \begin{definition}
    \textbf{FOLLOW Set}: A list of symbols that can occur after parsing
    non-terminals
  \end{definition}

  \subsection{Finding FOLLOW}

    $ \alpha, \beta $ represents terminal and nonterminal symbols

    \begin{enumerate}
      \item Put $ \$ $ in $ \FOLLOW\left( S \right) $, where $ S $ is the start
      symbol; $ \$ $ represents end of input
      \item If there is a production $ X \to \alpha Y \beta $, then add
      $ \FIRST\left( \beta \right) $ to $ \FOLLOW\left( Y \right) $
      \item If there is a production $ X \to \alpha Y $, or if there is \ul{a
      production $ X \to \alpha Y \beta $, where
      $ \epsilon \in \FIRST\left( \beta \right) $} then add
      $ \FOLLOW\left( X \right) $ to $ \FOLLOW\left( Y \right) $
    \end{enumerate}

\section{LL (Top Down) Parsing}

  \begin{definition}
    \textbf{LL}: parse from \textbf{left} to right and produces the
    \textbf{left} most derivation
  \end{definition}

  \paragraph{Implementation}
  \begin{equation*}
    A \to B a
  \end{equation*}
  \begin{itemize}
    \item Left hand side is the function being defined
    \item Terminals on right hande sides are commands to consume inputs
    \item Non terminals on right hande sides are subroutine calls
    \item For each production, make a function
    \begin{equation*}
      \left( \left[ tokens \right] \right) \to
      \left( \Tree, \left[ tokens \right] \right)
    \end{equation*}
    Return token stream to keep track of where we are in the token stream
  \end{itemize}

  \paragraph{Drawbacks}
  \begin{itemize}
    \item Grammar with left recursions causes a infinite loop
    \begin{itemize}
      \item See \ref{section: grammar/eliminate left recursion}
    \end{itemize}
    \item Grammar with common prefixes would confuse the function
    \begin{itemize}
      \item See \ref{section: grammar/eliminate common prefix}
    \end{itemize}
  \end{itemize}
